{"question_id": "B2cDKx5", "pass": false, "root_causes": ["Uses variable B2cDKx5 (aggregate) instead of the expected multi sub-variable name B2cDKx5_99", "Treats the question like a single-value variable rather than a multi-checkbox (should validate sub-variables individually)", "Includes special codes 97 and 98 without those being specified in the expected answers (possible mismatch with survey spec)"], "instructions": ["Reference and validate the specific checkbox sub-variable: use B2cDKx5_99 rather than B2cDKx5.", "For a multi (checkbox) field with only code 99 allowed, change the selection to check the sub-variable presence: sel if miss(B2cDKx5_99) or ~any(B2cDKx5_99,99).", "If special codes (97/98/99) are part of this question in the survey implementation, explicitly include the correct ones; otherwise remove 97/98 from the any() check to match the expected answers.", "Update the LIST line to output the sub-variable: list respid, B2cDKx5_99."]}
{"question_id": "B3bc", "pass": false, "root_causes": ["Missing entry condition GetNum('B3bb_2')>4 — the script validates B3bc for all records regardless of the entry rule", "Although allowed answer codes 1–6 are validated, the script does not apply the question's entry logic before flagging missing responses"], "instructions": ["Apply the entry condition so checks run only when GetNum('B3bb_2')>4. For example: sel if GetNum('B3bb_2')>4 & (miss(B3bc) or ~any(B3bc,1,2,3,4,5,6,97,98,99)).", "If special codes 97/98/99 are not defined for this question in the spec, remove them from the any() list and only validate 1–6.", "Ensure the LIST line remains constrained to the same entry condition so output only shows relevant cases: list respid, B3bc."]}
{"question_id": "B3cx1", "pass": false, "root_causes": ["Does validate numeric range per sub-variable (0–999) but omits the additional validation logic specified in ValidationCode (CheckDK3D and validateB1c)", "Does not reference or enforce rules related to the DK/checkbox variable B3cDKx1 (the CheckDK3D step)", "Does not perform the cross-question auto-sum/consistency validation validateB1c(\"S7_1\",\"B3cx1\") when B3cDKx1 is empty"], "instructions": ["Keep the existing per-cell numeric range checks (not miss(sub) and ~range(sub,0,999)), but also implement the ValidationCode steps from the spec.", "Add a CheckDK3D('B3cx1','B3cDKx1') equivalent in SPSS to ensure DK/other selection rules are enforced (or call the project-standard macro that performs CheckDK3D).", "After CheckDK3D, conditionally run the cross-question validation: if no question errors and f('B3cDKx1').size() == 0 then execute validateB1c(\"S7_1\",\"B3cx1\") (or the SPSS macro/function that implements validateB1c).", "Ensure the script flags only the appropriate records (respecting NotRequired behavior) and includes all listed sub-variables in the LIST output."]}
